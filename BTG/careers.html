<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Brands To Go | Careers</title>

  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@900&family=Playfair+Display:ital,wght@0,400;1,400&display=swap" rel="stylesheet">

  <style>
    :root {
      --brand-red: #EF3340;
      --brand-red-dark: #AB001F;
      --secondary-purple: #6C5E7E;
      --secondary-beige: #DBC9B1;
      --secondary-gold: #CEA988;
      --primary-black: #0c0c0c;
      --off-white: #f8f8f8;
      --grey-200: #e0e0e0;
      --grey-400: #888888;
      --font-primary: 'ITC Fenice', 'Playfair Display', serif;
      --font-secondary: 'Gotham Pro Black', 'Montserrat', sans-serif;
      --nav-h: 80px;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: var(--font-primary); background-color: var(--off-white); color: var(--primary-black); line-height: 1.6; }

    h1, h2, h3, h4, .btn, .badge, .nav-links a { font-family: var(--font-secondary); }
    h1 { font-size: 4rem; text-transform: uppercase; font-weight: 900; }

    .container { max-width: 1300px; margin: 0 auto; padding: 0 5%; }
    .section-py { padding: 100px 0; }
    .grid { display: grid; }

    nav {
      position: fixed; top: 0; width: 100%; height: var(--nav-h);
      background: white; display: flex; align-items: center;
      z-index: 1000; border-bottom: 1px solid #f0f0f0;
    }
    .nav-content { width: 100%; display: flex; justify-content: space-between; align-items: center; }

    .brand-logo { display: flex; align-items: center; flex-shrink: 0; text-decoration: none; color: black; }
    .brand-logo img { height: 54px; width: auto; object-fit: contain; }

    .nav-links { display: flex; gap: 30px; list-style: none; align-items: center; }
    .nav-links a { text-decoration: none; color: var(--secondary-purple); font-weight: 900; font-size: 12px; text-transform: uppercase; }
    .nav-links a:hover, .nav-links a.active { color: var(--brand-red); }
    .nav-cta { background: var(--brand-red); color: white !important; padding: 10px 18px; }

    .nav-toggle, .nav-close { display: none; }

    @media (max-width: 768px) {
      .nav-toggle { display: block; font-size: 26px; background: none; border: none; cursor: pointer; }

      .nav-links {
        position: fixed; top: 0; left: 0;
        height: 100vh; width: 80%; max-width: 320px;
        background: white;
        flex-direction: column;
        padding: 100px 30px 30px;
        gap: 25px;
        box-shadow: 20px 0 40px rgba(0,0,0,0.1);
        transform: translateX(-100%);
        transition: transform 0.45s ease;
        z-index: 1200;
      }
      .nav-links.open { transform: translateX(0); }
      .nav-links li { width: 100%; }

      .nav-close {
        display: block;
        position: absolute; top: 30px; right: 25px;
        font-size: 26px; background: none; border: none; cursor: pointer;
      }
    }

    .badge {
      background: var(--brand-red);
      color: white;
      padding: 6px 14px;
      font-size: 11px;
      font-weight: 800;
      text-transform: uppercase;
      display: inline-block;
      margin-bottom: 16px;
    }

    .form-control {
      width: 100%;
      padding: 16px;
      border: 1px solid var(--grey-200);
      margin-bottom: 16px;
      font-family: var(--font-primary);
      font-size: 1rem;
      border-radius: 0;
      outline: none;
      background: white;
    }
    .form-control:focus { border-color: var(--brand-red); }

    .job-card {
      background: white;
      border-bottom: 1px solid #eee;
      padding: 30px;
      margin-bottom: 10px;
      cursor: pointer;
      transition: 0.2s;
    }
    .job-card:hover {
      border-left: 5px solid var(--brand-red);
      padding-left: 25px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.05);
    }

    .layout-grid {
      display: grid;
      grid-template-columns: 280px 1fr;
      gap: 60px;
      margin-top: 60px;
    }
    .grid-2 { grid-template-columns: 1fr 1fr; gap: 20px; }

    @media (max-width: 900px) {
      .layout-grid { display: block; }
      .grid-2 { grid-template-columns: 1fr; }
      aside { margin-bottom: 40px; }
    }

    .modal {
      position: fixed; inset: 0;
      background: rgba(108, 94, 126, 0.9);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 2000;
      padding: 20px;
    }
    .modal.open { display: flex; }

    .modal-inner {
      background: white;
      width: 100%;
      max-width: 800px;
      max-height: 90vh;
      overflow-y: auto;
      padding: 50px;
      position: relative;
    }

    .close-modal {
      position: absolute;
      top: 25px; right: 25px;
      font-size: 30px;
      cursor: pointer;
      color: var(--grey-400);
    }

    .btn-red {
      background: var(--brand-red);
      color: white;
      border: none;
      padding: 15px;
      font-weight: 900;
      text-transform: uppercase;
      cursor: pointer;
    }
    .btn-red:hover { background: var(--brand-red-dark); }

    footer {
      background: var(--primary-black);
      color: white;
      padding: 80px 0 40px;
      margin-top: 80px;
    }

    .footer-grid {
      display: grid;
      grid-template-columns: 2fr 1fr 1fr 1fr;
      gap: 60px;
      margin-bottom: 60px;
    }
    .logoFooter { max-width: 180px; height: auto; margin-bottom: 20px; }
    .footer-col h5 { margin-bottom: 20px; font-size: 14px; opacity: 0.5; }
    .footer-links { list-style: none; padding: 0; }
    .footer-links li { margin-bottom: 12px; }
    .footer-links a { color: white; text-decoration: none; opacity: 0.8; font-size: 15px; }
    .footer-links a:hover { opacity: 1; padding-left: 6px; }
    .footertxt { text-align: center; margin-bottom: 2%; }

    @media (max-width: 1024px) {
      .footer-grid { grid-template-columns: 1fr 1fr; gap: 40px; }
    }
    @media (max-width: 768px) {
      footer { padding: 60px 0 30px; text-align: left; }
      .footer-grid { grid-template-columns: 1fr; gap: 40px; }
      .logoFooter { margin-bottom: 10px; }
    }

    footer > .container > div:last-child {
      padding-top: 30px;
      border-top: 1px solid rgba(255,255,255,0.05);
      text-align: center;
    }
  </style>
</head>

<body>
  <nav id="navbar">
    <div class="container nav-content">

      <button class="nav-toggle" aria-label="Open Menu">☰</button>

      <a href="index.html" class="brand-logo" style="background:none">
        <img src="images/logo.png" alt="Brands To Go">
      </a>

      <ul class="nav-links">
        <button class="nav-close" aria-label="Close Menu">✕</button>
        <li><a href="index.html">Home</a></li>
        <li><a href="story.html">Our Story</a></li>
        <li><a href="locations.html">Locations</a></li>
        <li><a href="careers.html" class="active">Careers</a></li>
        <li><a href="careers.html" class="nav-cta">Apply Now</a></li>
      </ul>

    </div>
  </nav>

  <main style="margin-top: 80px;">
    <section class="section-py container">
      <span class="badge">Join The Team</span>
      <h1>Pioneer With Us.</h1>
      <p>Join the launch team for the most anticipated retail opening in Abu Dhabi.</p>

      <div class="layout-grid">
        <aside>
          <div style="margin-bottom: 40px;">
            <h4 style="font-size: 13px; margin-bottom: 20px;">Mall Site</h4>
            <select class="form-control" id="f-loc" onchange="jobSystem.renderJobs()">
              <option value="all">All Sites</option>
              <option value="Reem Mall">Reem Mall</option>
              <option value="Al Wahda">Al Wahda Mall</option>
            </select>
          </div>

          <div style="margin-bottom: 40px;">
            <h4 style="font-size: 13px; margin-bottom: 20px;">Category</h4>
            <select class="form-control" id="f-dep" onchange="jobSystem.renderJobs()">
              <option value="all">All Roles</option>
              <option value="Retail">Retail & Styling</option>
              <option value="Operations">Operations</option>
              <option value="Management">Management</option>
            </select>
          </div>
        </aside>

        <div id="job-list-container"></div>
      </div>
    </section>
  </main>

  <!-- APPLICATION MODAL -->
  <div id="modal-app" class="modal">
    <div class="modal-inner">
      <div class="close-modal" onclick="jobSystem.closeModal()">&times;</div>
      <div id="role-data"></div>

      <hr style="margin:30px 0; border:0; border-top: 1px solid var(--grey-200);">

      <h3 style="margin-bottom: 20px;">Submit Application</h3>

      <form id="apply-form" onsubmit="event.preventDefault(); submitJobApplication(this);">
        <input type="hidden" name="applied_role" id="target-role">

        <div class="grid grid-2">
          <div>
            <label style="font-size:11px; font-weight:800; font-family: var(--font-secondary);">FULL NAME *</label>
            <input type="text" name="name" required class="form-control">
          </div>
          <div>
            <label style="font-size:11px; font-weight:800; font-family: var(--font-secondary);">EMAIL *</label>
            <input type="email" name="email" required class="form-control">
          </div>
        </div>

        <div class="grid grid-2">
          <div>
            <label style="font-size:11px; font-weight:800; font-family: var(--font-secondary);">PHONE *</label>
            <input type="tel" name="phone" required class="form-control">
          </div>
          <div>
            <label style="font-size:11px; font-weight:800; font-family: var(--font-secondary);">PREFERRED SITE</label>
            <select name="mall_pref" class="form-control">
              <option>Reem Mall</option>
              <option>Al Wahda Mall</option>
            </select>
          </div>
        </div>

        <label style="font-size:11px; font-weight:800; font-family: var(--font-secondary);">UPLOAD CV (PDF) *</label>
        <input type="file" id="cv" required accept="application/pdf" class="form-control">

        <p id="msg" style="display:none; text-align:center; padding:15px; margin-bottom:15px;"></p>
        <button type="submit" class="btn-red" style="width:100%;" id="btn-submit">Submit</button>
      </form>
    </div>
  </div>

  <script>
    /**************** CONFIG ****************/
    const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbzAwpODbP9ttyr4XTpbVLWifhTimlxTXENaAmzehIehFUFoYcB5D62jNN-Jt8bKT78l/exec";

    /**************** JOBS ****************/
    const JOBS = [
      { title: 'Flagship General Manager', loc: 'Reem Mall', dep: 'Management', desc: 'Direct operations for our largest UAE flagship.' },
      { title: 'Fashion Advisor (Sales)', loc: 'Reem Mall', dep: 'Retail', desc: 'Expert customer service focusing on styling.' },
      { title: 'Merchandising Lead', loc: 'Reem Mall', dep: 'Retail', desc: 'Craft high-converting visual floor plans.' },
      { title: 'Site Supervisor', loc: 'Al Wahda Mall', dep: 'Management', desc: 'Run daily floor ops for the city flagship.' },
      { title: 'Inventory Analyst', loc: 'Al Wahda Mall', dep: 'Operations', desc: 'Audit and manage incoming global surpluses.' },
      { title: 'Front of House Host', loc: 'Al Wahda Mall', dep: 'Retail', desc: 'Greeting and providing elite service to our VIP visitors.' }
    ];

    const jobSystem = {
      renderJobs: () => {
        const locVal = document.getElementById('f-loc').value;
        const depVal = document.getElementById('f-dep').value;

        const filtered = JOBS.filter(j => {
          const lM = (locVal === 'all' || j.loc.includes(locVal));
          const dM = (depVal === 'all' || j.dep === depVal);
          return lM && dM;
        });

        const container = document.getElementById('job-list-container');
        if (filtered.length === 0) {
          container.innerHTML = '<div style="background:white; padding:40px; text-align:center;">No openings currently available for this search.</div>';
          return;
        }

        container.innerHTML = filtered.map(j => `
          <div class="job-card" onclick="jobSystem.openModal('${escapeHtml(j.title)}', '${escapeHtml(j.desc)}', '${escapeHtml(j.loc)}')">
            <div class="badge" style="margin-bottom:10px;">${escapeHtml(j.loc)}</div>
            <h4 style="margin-bottom:5px;">${escapeHtml(j.title)}</h4>
            <p style="font-size:0.9rem; color:var(--secondary-purple);">${escapeHtml(j.dep)} Department • UAE Nationals & Expats</p>
          </div>
        `).join('');
      },

      openModal: (title, desc, loc) => {
        document.getElementById('role-data').innerHTML = `
          <div class="badge">${escapeHtml(loc)}</div>
          <h2 style="margin-top:20px; font-size:2rem;">${escapeHtml(title)}</h2>
          <p style="margin-top:15px; font-size: 1.1rem;">${escapeHtml(desc)}</p>
        `;
        document.getElementById('target-role').value = title;
        document.getElementById('modal-app').classList.add('open');
        document.body.style.overflow = 'hidden';
      },

      closeModal: () => {
        document.getElementById('modal-app').classList.remove('open');
        document.body.style.overflow = 'auto';
        document.getElementById('apply-form').reset();
        const msg = document.getElementById("msg");
        msg.style.display = "none";
      },
    };

    function escapeHtml(str) {
      return String(str)
        .replaceAll("&", "&amp;")
        .replaceAll("<", "&lt;")
        .replaceAll(">", "&gt;")
        .replaceAll('"', "&quot;")
        .replaceAll("'", "&#039;");
    }

    document.addEventListener('DOMContentLoaded', jobSystem.renderJobs);
  </script>

  <footer>
    <div class="container">
      <div class="grid footer-grid">
        <div class="footer-col">
          <div><img class="logoFooter" src="images/logo.png" alt="Brands To Go"></div>
        </div>
        <div class="footer-col">
          <h5>Connect</h5>
          <ul class="footer-links">
            <li><a href="#">Instagram</a></li>
            <li><a href="#">LinkedIn</a></li>
            <li><a href="#">TikTok</a></li>
          </ul>
        </div>
        <div class="footer-col">
          <h5>Company</h5>
          <ul class="footer-links">
            <li><a href="story.html">Our Story</a></li>
            <li><a href="locations.html">Locations</a></li>
            <li><a href="careers.html">Careers</a></li>
          </ul>
        </div>
        <div class="footer-col">
          <h5>Direct</h5>
          <p style="color:white; font-size:14px; margin-top:5px;">careers@brandstogo.me</p>
          <p style="color:white; font-size:14px; margin-top:5px;">+971 00 000 0000</p>
        </div>
      </div>

      <div class="footertxt" style="color:#DBC9B1;">Your brand. Your Prices.</div>

      <div style="padding-top:40px; border-top:1px solid rgba(255,255,255,0.05); text-align:center;">
        <p style="font-size:12px; color:#6C5E7E;">©️ 2026 BRANDS TO GO RETAIL GROUP. ALL RIGHTS RESERVED.</p>
      </div>
    </div>
  </footer>

  <!-- NAV (PHONE) -->
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const toggle = document.querySelector(".nav-toggle");
      const closeBtn = document.querySelector(".nav-close");
      const navLinks = document.querySelector(".nav-links");

      toggle.addEventListener("click", () => navLinks.classList.add("open"));
      closeBtn.addEventListener("click", () => navLinks.classList.remove("open"));
    });
  </script>

  <!-- SUBMIT HANDLER -->
  <script>
    async function submitJobApplication(form) {
      const msg = document.getElementById("msg");
      const btn = document.getElementById("btn-submit");
      const fileInput = document.getElementById("cv");
      const file = fileInput.files[0];

      btn.disabled = true;
      btn.innerText = "Uploading...";
      msg.style.display = "none";

      try {
        if (!file) throw new Error("Please upload your CV as a PDF.");
        if (file.type !== "application/pdf") throw new Error("PDF files only.");
        if (file.size > 2 * 1024 * 1024) throw new Error("File too large. Max 2MB.");

        const base64 = await new Promise((resolve, reject) => {
          const reader = new FileReader();
          reader.onload = () => resolve(String(reader.result).split(",")[1]);
          reader.onerror = () => reject(new Error("Failed to read file."));
          reader.readAsDataURL(file);
        });

        const payload = {
          name: (form.name.value || "").trim(),
          email: (form.email.value || "").trim(),
          phone: (form.phone.value || "").trim(),
          mall_pref: form.mall_pref.value,
          applied_role: document.getElementById("target-role").value,
          cv_filename: file.name,
          cv_base64: base64
        };

        const res = await fetch(WEB_APP_URL, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(payload),
          redirect: "follow"
        });

        const raw = await res.text();
        let data;
        try { data = JSON.parse(raw); }
        catch { throw new Error("Server returned non-JSON: " + raw.slice(0, 200)); }

        if (!res.ok) throw new Error(`HTTP ${res.status}: ${raw.slice(0, 200)}`);
        if (!data.success) throw new Error(data.error || "Unknown server error");

        msg.innerText = "✅ Application submitted successfully!";
        msg.style.color = "green";
        form.reset();

      } catch (err) {
        msg.innerText = "❌ " + (err.message || "Upload failed");
        msg.style.color = "red";
      } finally {
        msg.style.display = "block";
        btn.disabled = false;
        btn.innerText = "Submit";
      }
    }
  </script>
</body>
</html>
